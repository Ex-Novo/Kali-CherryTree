<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>Gaining Root with Metasploit</title>
</head><body>&nbsp; &nbsp; &nbsp; &nbsp; <b>Gaining Root with Metasploit</b><br/>
<br/>
We want to attack SMB: you can start with the <b>trans2open</b>&nbsp;exploit:<br/>
<img src="1.png" /><br/>
<br/>
<img src="1.1.png" /><br/>
<img src="file://c:\users\ex-novo\appdata\local\temp\tmpylrjhj\1.png" /><br/>
<br/>
<img src="file://c:\users\ex-novo\appdata\local\temp\tmpylrjhj\2.png" /><br/>
<br/>
<br/>
Once found the right one, use that and see the info about it:<br/>
You can use<b>&nbsp;“show targets”</b>&nbsp;to show targets and <b>“set target”</b>&nbsp;to set one<br/>
<img src="file://c:\users\ex-novo\appdata\local\temp\tmpylrjhj\3.png" /><br/>
<img src="2.png" /><br/>
<br/>
Once set we can <b>run/exploit</b>&nbsp;(they are the same command for this use) to try the exploit:<br/>
<img src="file://c:\users\ex-novo\appdata\local\temp\tmpylrjhj\4.png" /><br/>
<img src="3.png" /><br/>
<br/>
We are returning some errors here!! What is going on?<br/>
The exploit seems to be fine, but <b>Meterpreter sessions are opened and closed.</b><br/>
Maybe we need to check out payload: type <b>option</b>&nbsp;again<br/>
<img src="file://c:\users\ex-novo\appdata\local\temp\tmpylrjhj\5.png" /><br/>
<img src="4.png" /><br/>
<br/>
As you see, we have a <b>“linux/x86/meterpreter/reverse_tcp”</b>&nbsp;payload: a <b>Staged</b>&nbsp;payload<br/>
Now, we can see the compatible payloads for our exploit by typing <b>“show payloads”</b><br/>
<img src="file://c:\users\ex-novo\appdata\local\temp\tmpylrjhj\6.png" /><br/>
<img src="5.png" /><br/>
<br/>
Use the commands “set payload” with autocomplete tab to show more suggested results:<br/>
We will try use a <b>Non-Staged Bind Shell</b>&nbsp;instead of <b>Staged Reverse Shell</b><br/>
<img src="file://c:\users\ex-novo\appdata\local\temp\tmpylrjhj\7.png" /><br/>
<img src="6.png" /><br/>
<br/>
<img src="6.1.png" /><br/>
<img src="file://c:\users\ex-novo\appdata\local\temp\tmpylrjhj\8.png" /><br/>
<br/>
<br/>
Now, try again the exploit:<br/>
<img src="file://c:\users\ex-novo\appdata\local\temp\tmpylrjhj\9.png" /><br/>
<img src="7 2.png" /><br/>
<br/>
Now all works fine!!!<br/>
<br/>
</body></html>