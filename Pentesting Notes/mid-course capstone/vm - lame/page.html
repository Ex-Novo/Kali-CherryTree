<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>VM - Lame</title>
</head><body>&nbsp; &nbsp; &nbsp; &nbsp; <b>Walktrough - Lame</b><br/>
<br/>
<br/>
<b><i>Linux Machine</i></b><br/>
<br/>
First, start a "<b>nmap -T4 -A -p- IPADDRESS"</b><br/>
<br/>
<br/>
Port:<br/>
21/tcp open ftp vsftpd 2.3.4 (Anon login allowed: you can put or remove files)<br/>
22/tcp open ssh OpenSSH 4.7p1 Debian 8ubuntu1 (protocol 2.0)<br/>
139/tcp open netbios-ssn Samba smbd 3.X - 4.X (Workgroup: WORKGROUP)<br/>
445/tcp open netbios-ssn Samba smbd 3.0.20 - Debian (Workgroup: WORKGROUP)<br/>
3632/tcp open distccd distccd v1 ((GNU) 4.2.4 (Ubuntu 4.2.4-1ubuntu4))<br/>
<br/>
Probabily a Linux OpenWRT or Linux 2.6<br/>
<img src="1.png" /><br/>
<br/>
<img src="file://c:\users\ex-novo\appdata\local\temp\tmpylrjhj\1.png" /><br/>
<br/>
<br/>
<b>################################################################</b><br/>
<br/>
<br/>
<b>Samba</b><br/>
<br/>
Let's get started with Samba: Better Use <b>SMBClient</b><br/>
We can list folder!!!<br/>
<img src="file://c:\users\ex-novo\appdata\local\temp\tmpylrjhj\2.png" /><br/>
<img src="1 2.png" /><br/>
<br/>
<br/>
We can list the <b>“tmp”</b>&nbsp;folder and other folders:<br/>
<img src="file://c:\users\ex-novo\appdata\local\temp\tmpylrjhj\3.png" /><br/>
<img src="file://c:\users\ex-novo\appdata\local\temp\tmpylrjhj\4.png" /><br/>
<img src="1 3.png" /><br/>
<br/>
<br/>
<br/>
We could use Metasploit to find the Samba Version, but nmap provided us that:<br/>
<b>Samba 3.0.20-Debian</b><br/>
<br/>
<br/>
Let's do a Google Search to find more about:<br/>
<img src="file://c:\users\ex-novo\appdata\local\temp\tmpylrjhj\5.png" /><br/>
<img src="file://c:\users\ex-novo\appdata\local\temp\tmpylrjhj\6.png" /><br/>
<img src="file://c:\users\ex-novo\appdata\local\temp\tmpylrjhj\7.png" /><br/>
<img src="1 4.png" /><br/>
<br/>
<img src="2.png" /><br/>
<br/>
<img src="3.png" /><br/>
<br/>
<br/>
Use the module to exploit the machine (remember to set target and shells)<br/>
<img src="file://c:\users\ex-novo\appdata\local\temp\tmpylrjhj\8.png" /><br/>
<img src="1 5.png" /><br/>
<br/>
<br/>
Run the exploit and you have a root shell:<br/>
<img src="file://c:\users\ex-novo\appdata\local\temp\tmpylrjhj\9.png" /><br/>
<img src="2 2.png" /><br/>
<br/>
<b>################################################################</b><br/>
<br/>
<br/>
<b>FTP</b><br/>
<br/>
<br/>
First thing to do, try to log with ftp (anonymous login)<br/>
<img src="file://c:\users\ex-novo\appdata\local\temp\tmpylrjhj\10.png" /><br/>
<img src="file://c:\users\ex-novo\appdata\local\temp\tmpylrjhj\11.png" /><br/>
<img src="1 6.png" /><br/>
<br/>
<img src="2 3.png" /><br/>
<br/>
<br/>
Better search more about svftp service:<br/>
<img src="file://c:\users\ex-novo\appdata\local\temp\tmpylrjhj\12.png" /><br/>
<img src="file://c:\users\ex-novo\appdata\local\temp\tmpylrjhj\13.png" /><br/>
<img src="file://c:\users\ex-novo\appdata\local\temp\tmpylrjhj\14.png" /><br/>
<img src="1 7.png" /><br/>
<br/>
<img src="2 4.png" /><br/>
<br/>
<img src="3 2.png" /><br/>
<br/>
Let's try to use Metasploit:<br/>
<img src="file://c:\users\ex-novo\appdata\local\temp\tmpylrjhj\15.png" /><br/>
<img src="1 8.png" /><br/>
<br/>
<br/>
<b>################################################################</b><br/>
<br/>
<br/>
<b>Distcc<br/>
</b><br/>
<br/>
Find more about Distccd:<br/>
<img src="file://c:\users\ex-novo\appdata\local\temp\tmpylrjhj\16.png" /><br/>
<img src="1 9.png" /><br/>
<br/>
<br/>
We have the <b>v1</b>&nbsp;version, so should be exploitable.<br/>
Better find some exploits online on Google:<br/>
<img src="file://c:\users\ex-novo\appdata\local\temp\tmpylrjhj\17.png" /><br/>
<img src="2 5.png" /><br/>
<br/>
We can try to use the <b>Rapid7</b>&nbsp;one (Metasploit modules):<br/>
<img src="file://c:\users\ex-novo\appdata\local\temp\tmpylrjhj\18.png" /><br/>
<img src="file://c:\users\ex-novo\appdata\local\temp\tmpylrjhj\19.png" /><br/>
<img src="1 10.png" /><br/>
<br/>
<img src="2 6.png" /><br/>
<br/>
<img src="3 3.png" /><br/>
<img src="file://c:\users\ex-novo\appdata\local\temp\tmpylrjhj\20.png" /><br/>
<br/>
<br/>
<b>################################################################</b><br/>
<br/>
<br/>
<br/>
<b>Post-Exploitation: What to do</b><br/>
<br/>
<br/>
Cat the <b>/etc/passwd</b>&nbsp;file (To know more about users)<br/>
<img src="1 11.png" /><br/>
<br/>
<img src="2 7.png" /><br/>
<img src="file://c:\users\ex-novo\appdata\local\temp\tmpylrjhj\21.png" /><br/>
<img src="file://c:\users\ex-novo\appdata\local\temp\tmpylrjhj\22.png" /><br/>
<br/>
<br/>
Cat the <b>/etc/shadow</b>&nbsp;file (To know the hashed passwords)<br/>
<img src="file://c:\users\ex-novo\appdata\local\temp\tmpylrjhj\23.png" /><br/>
<img src="file://c:\users\ex-novo\appdata\local\temp\tmpylrjhj\24.png" /><br/>
<img src="1 12.png" /><br/>
<br/>
<img src="2 8.png" /><br/>
<br/>
<br/>
Use <b>unshadow</b>&nbsp;with the <b>passwd file</b>&nbsp;and <b>shadow</b>&nbsp;<b>file<br/>
</b><b><img src="1 13.png" /><br/>
<br/>
<img src="2 9.png" /><br/>
</b><br/>
<img src="file://c:\users\ex-novo\appdata\local\temp\tmpylrjhj\25.png" /><br/>
<img src="file://c:\users\ex-novo\appdata\local\temp\tmpylrjhj\26.png" /></body></html>