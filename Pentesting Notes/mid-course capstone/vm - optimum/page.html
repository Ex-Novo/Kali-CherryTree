<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>VM - Optimum</title>
</head><body>&nbsp; &nbsp; &nbsp; &nbsp; <b>Walktrough - Optimum</b><br/>
<br/>
<br/>
<b><i>Windows Machine</i></b><br/>
<br/>
First, start a "<b>nmap -T4 -A -p- IPADDRESS"<br/>
</b><img src="1.png" /><br/>
<img src="file://c:\users\ex-novo\appdata\local\temp\tmpvp0wca\1.png" /><br/>
<br/>
<br/>
<br/>
<br/>
There is only one port (80): <b>HttpFileServer httpd 2.3 version</b><br/>
And the OS is probably a <b>Microsoft Windows Server 2012</b><br/>
<br/>
<br/>
<b>################################################################</b><br/>
<br/>
<br/>
<b>Web Server</b><br/>
<br/>
We can do some Google search about.<br/>
Exploits:<br/>
<img src="file://c:\users\ex-novo\appdata\local\temp\tmpvp0wca\2.png" /><br/>
<img src="file://c:\users\ex-novo\appdata\local\temp\tmpvp0wca\3.png" /><br/>
<b><br/>
</b><img src="1 2.png" /><b><br/>
</b><b><br/>
</b><img src="2.png" /><br/>
<br/>
<br/>
Default Credentials:<br/>
<img src="file://c:\users\ex-novo\appdata\local\temp\tmpvp0wca\4.png" /><br/>
<img src="1 3.png" /><br/>
<br/>
<br/>
We will us the ruby module on Metasploit:<br/>
<img src="file://c:\users\ex-novo\appdata\local\temp\tmpvp0wca\5.png" /><br/>
<img src="1 4.png" /><br/>
<br/>
<br/>
Now we can set a payload (meterpreter preferred) and we can launch our exploit:<br/>
<img src="file://c:\users\ex-novo\appdata\local\temp\tmpvp0wca\6.png" /><br/>
<img src="1 5.png" /><br/>
<br/>
<br/>
As we see, we are not <b>NT AUTHORITY\SYSTEM</b>&nbsp;<br/>
<img src="file://c:\users\ex-novo\appdata\local\temp\tmpvp0wca\7.png" /><br/>
<img src="1 6.png" /><br/>
<br/>
<br/>
And <b>getsystem</b>&nbsp;didn't work:<br/>
<img src="1 7.png" /><br/>
<img src="file://c:\users\ex-novo\appdata\local\temp\tmpvp0wca\8.png" /><br/>
<br/>
<br/>
We can use the <b>SUGGESTOR</b>&nbsp;to get more exploits to do, to get the root access:<br/>
<img src="file://c:\users\ex-novo\appdata\local\temp\tmpvp0wca\9.png" /><br/>
<img src="1 8.png" /><br/>
<br/>
<br/>
Nothing. It is usually hard to get local exploits for x64 machines.<br/>
<br/>
Or, we can search for the OS privilege escalation online or on Metasploit<br/>
<img src="file://c:\users\ex-novo\appdata\local\temp\tmpvp0wca\10.png" /><br/>
<img src="1 9.png" /><br/>
<br/>
<img src="2 2.png" /><br/>
<br/>
<br/>
<br/>
<img src="file://c:\users\ex-novo\appdata\local\temp\tmpvp0wca\11.png" /><br/>
We found an MS16-32 can help us (LOOK AT THE RIGHT OF THE IMAGE)<br/>
<img src="file://c:\users\ex-novo\appdata\local\temp\tmpvp0wca\12.png" /><br/>
<img src="1 10.png" /><br/>
<br/>
<img src="2 3.png" /><br/>
<br/>
<img src="3.png" /><br/>
<br/>
<img src="file://c:\users\ex-novo\appdata\local\temp\tmpvp0wca\13.png" /><br/>
<img src="file://c:\users\ex-novo\appdata\local\temp\tmpvp0wca\14.png" /><br/>
<br/>
<br/>
Now set a payload and run the exploit:<br/>
The exploit sometimes work, other times not (this time don't)<br/>
<img src="1 11.png" /><br/>
<img src="file://c:\users\ex-novo\appdata\local\temp\tmpvp0wca\15.png" /><br/>
<br/>
<br/>
Manual Methods for Privilege Escalation:<br/>
<b>ALSO WE CAN SEARCH FOR MANUAL PRIVILEGE ESCALATION<br/>
</b><img src="1 12.png" /><br/>
<img src="file://c:\users\ex-novo\appdata\local\temp\tmpvp0wca\16.png" /><br/>
<br/>
<br/>
<b>################################################################</b><br/>
<br/>
We can use a tool called “Sherlock” rasta-mouse or Watson<br/>
<a href="https://github.com/rasta-mouse/Sherlock">https://github.com/rasta-mouse/Sherlock</a><br/>
<a href="https://github.com/rasta-mouse/Watson">https://github.com/rasta-mouse/Watson<br/>
</a><img src="1 13.png" /><br/>
<img src="file://c:\users\ex-novo\appdata\local\temp\tmpvp0wca\17.png" /><br/>
<br/>
<br/>
We can download the .ps1 script, and load on Windows machine<br/>
<img src="file://c:\users\ex-novo\appdata\local\temp\tmpvp0wca\18.png" /><br/>
<img src="file://c:\users\ex-novo\appdata\local\temp\tmpvp0wca\19.png" /><br/>
<img src="file://c:\users\ex-novo\appdata\local\temp\tmpvp0wca\20.png" /><br/>
<img src="1 14.png" /><br/>
<br/>
<img src="2 4.png" /><br/>
<br/>
<img src="3 2.png" /><br/>
<br/>
<br/>
<br/>
Run the Sherlock .ps1 script: it will suggest use some exploits that may be working<br/>
<img src="file://c:\users\ex-novo\appdata\local\temp\tmpvp0wca\21.png" /><br/>
<img src="file://c:\users\ex-novo\appdata\local\temp\tmpvp0wca\22.png" /><br/>
<img src="1 15.png" /><br/>
<br/>
<img src="2 5.png" /><br/>
<br/>
<br/>
<br/>
Or we can search some tools like Windows Exploit Suggester: Read wht instructions!!!<br/>
<a href="https://github.com/AonCyberLabs/Windows-Exploit-Suggester">https://github.com/AonCyberLabs/Windows-Exploit-Suggester</a><br/>
<img src="file://c:\users\ex-novo\appdata\local\temp\tmpvp0wca\23.png" /><br/>
<img src="1 16.png" /><br/>
<br/>
<img src="2 6.png" /><br/>
<img src="file://c:\users\ex-novo\appdata\local\temp\tmpvp0wca\24.png" /><br/>
<br/>
<br/>
Now we can use the nex exploit, compile and run:<br/>
<img src="1 17.png" /><br/>
<br/>
<img src="2 7.png" /><br/>
<img src="file://c:\users\ex-novo\appdata\local\temp\tmpvp0wca\25.png" /><br/>
<img src="file://c:\users\ex-novo\appdata\local\temp\tmpvp0wca\26.png" /><br/>
<br/>
<br/>
Just transfer this on enemy machine Windows and execute: (we called the file <b>sh.exe</b>)<br/>
<img src="3 3.png" /><br/>
<img src="file://c:\users\ex-novo\appdata\local\temp\tmpvp0wca\27.png" /></body></html>